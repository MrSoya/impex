<!DOCTYPE html>
<html >
    <head>
        <title>Impex Demo</title>
        <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <link rel="stylesheet" type="text/css" href="../themes/default.css"/>
        <link rel="stylesheet" type="text/css" href="../lib/fontawesome/css/font-awesome.min.css"/>
        <style type="text/css">
            div{
                margin: .5rem;
            }
        </style>
    </head>
    <body>
        model -> view & view -> model
        <div id="demo">
            <x-a .x:compute="store.state.x"  x-store:x="x">
                x-a: {{x}}
            </x-a>
            <x-b .y:compute="store.state.y + 1" .x:compute="store.state.x">
                x-b: {{y + x}}
            </x-b>
            <x-c > 
                store x: 
                <input 
                .value="store.state.x" 
                x-model="x"
                x-store:setX="x" >
                <br>
                store y: 
                <input .value="store.state.y" :input="changeStorey($event)">
            </x-c>
            
        </div>
        <script type="text/javascript" src="../lib/impex/impex.all.js"></script>
        <script type="text/javascript" src="../../ext/impex.ext.store.js"></script>
        <script type="text/javascript">
            impex.component('x-a',{
                template:'<div><slot></slot></div>'
            });
            impex.component('x-b',{
                template:'<div><slot></slot></div>'
            });
            impex.component('x-c',{
                template:'<div><slot></slot></div>'
            });
            var store = new impex.Store({
                state:{
                    x:1,
                    y:2
                },
                actions:{
                    setX:function(val){
                        this.state.x = val;
                    },
                    setY:function(val){
                        this.state.y = val;
                    }
                }
            });

            function changeStorex(e){
                var v = e.target.value;
                store.commit('setX',parseInt(v));
            }
            function changeStorey(e){
                var v = e.target.value;
                store.commit('setY',parseInt(v));
            }
            //渲染
            var debug = impex.render('#demo',{
                change:function(argument) {
                    store.commit('change',Math.random()*100);
                }
            });
        </script>
    </body>
</html>