<!DOCTYPE html>
<html >
    <head>
        <title>Impex Demo</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <style type="text/css">
            a{
                display: inline-block;
                border: 1px solid #000;
                margin: 0 1rem 0 0;
            }
        </style>
    </head>
    <body >
        <div id="demo">
            <section>
                <a x-link="'/list/1'" http="true">列表</a>
                <button x-link="{to:'/form/a/b',title:'表单'}">表单</button>
            </section>
            <header>
                <x-route path="/list/:id" :render="routeNav" :end="endRoute"></x-route>
            </header>
            <section>
                <x-route path="/list/*" component="x-list"></x-route>
                <x-route path="/form/**" :end="endRoute" component="x-form"></x-route>
            </section>
            
        </div>


        <script type="text/javascript" src="../lib/impex/impex.all.js"></script>
        <script type="text/javascript" src="../lib/impex/impex.ext.router.js"></script>
        <script type="text/javascript">
            //自定义组件
            impex.component('x-nav',{
                template:"<ul><li x-for='navs as nav'>{{nav}}</li></ul>",
                state:{
                    navs:['impex','soya2d','soya studio']
                }
            });

            impex.component('x-list',{
                template:"<ul><li x-for='1 to 120 as i'>{{i}}</li></ul>"
            });

            impex.component('x-form',{
                template:"<form><p>/form/**</p><label>name:<input .value='name'></label><label>type:<input .value='type'></label></form>",
                state:{
                	type:'',
                	name:''
                }
            });

            //渲染
            impex.render('#demo',{
            	routeNav:function(viewFn,props,path){
            		setTimeout(function(){
            			viewFn('<x-nav></x-nav>');
            		},5000);
            		console.log('load view after 5 sec');
            	},
            	endRoute:function(comp,props) {
            		console.log(comp);
            	},
                state:{
                    formData:{
                        name:'impex',
                        type:'route'
                    }
                }
            });

            /**
             * 需求
             * 
             */
            
        </script>
    </body>
</html>