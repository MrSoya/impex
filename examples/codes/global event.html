<!DOCTYPE html>
<html >
    <head>
        <title>Impex Demo</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <style type="text/css">
            label{
                display: block;
            }
        </style>
    </head>
    <body >
        <div id="demo">
            <x-total></x-total>
            <p>
                <x-addx></x-addx>
                <x-addy></x-addy>
            </p>
        </div>
        
        <script type="text/javascript" src="../lib/impex/impex.dev.all.js"></script>
        <script type="text/javascript" src="../../ext/impex.ext.store.js"></script>
        <script type="text/javascript">
            var eventbus = new impex.EventEmitter;

            impex.component('x-total',{
                template:'<div>x+y = {{x+y}}</div>',
                state:{
                    x:999,
                    y:1
                },
                onCompile:function(){
                    var that = this;
                    eventbus
                    .on('addx',function(x){
                        that.state.x = x;
                    })
                    .on('addy',function(y){
                        that.state.y = y;
                    })
                }
            });
            impex.component('x-addx',{
                template:'<label><button :click="add()">Addx</button>x={{x}}</label>',
                state:{
                    x:999
                },
                add:function(){
                    eventbus.emit('addx',++this.state.x);
                }
            });

            impex.component('x-addy',{
                template:'<label><button :click="add()">Addy</button>y={{y}}</label>',
                state:{
                    y:1
                },
                add:function(){
                    eventbus.emit('addy',++this.state.y);
                }
            });

            //渲染
            var debug = impex.render('#demo',{
                
            });

            
        </script>
    </body>
</html>